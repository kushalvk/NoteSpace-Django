{% extends "base.html" %}
{% load static %}

{% block title %}Manage Tags â€“ NoteSpace{% endblock %}

{% block content %}

<div class="container py-5">

    <!-- Hero-style header (similar to category page) -->
    <section class="category-hero mb-5">
        <div class="container">
            <div class="hero-content text-center">
                <span class="category-badge">Managed By Admin</span>
                <h1 class="page-title">Tag Management</h1>
                <p class="page-subtitle">
                    Create, edit and organize tags for your blog posts
                    <br>
                    <small class="opacity-75">Currently {{ tags|length }} tags</small>
                </p>
            </div>
        </div>
    </section>

    <!-- Add new tag form â€“ glassmorphism card, centered -->
    {% if request.user.is_staff %}
    <div class="post-card mx-auto mb-5" style="max-width: 720px;">
        <div class="post-content p-4 p-md-5">
            <h3 class="mb-4 fw-semibold" style="color: #111827;">
                Add New Tag
            </h3>

            <form method="POST" class="d-flex flex-column flex-sm-row gap-3 align-items-end">
                {% csrf_token %}

                <div class="flex-grow-1">
                    <input type="text"
                           name="name"
                           class="form-control form-control-lg border-0 shadow-sm"
                           placeholder="Tag name (e.g. Python, TravelTips, MentalHealth, AI2025...)"
                           required
                           autofocus
                           style="background: rgba(249,250,251,0.7); backdrop-filter: blur(10px);">
                </div>

                <button type="submit"
                        class="subtn btn btn-primary btn-lg px-5 shadow"
                        style="background: linear-gradient(135deg, #3b82f6, #2563eb); border: none;">
                    <i class="bi bi-plus-lg me-2"></i>Add Tag
                </button>
            </form>

            {% if messages %}
            <div class="mt-4">
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show d-flex align-items-center" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert"></button>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Tags grid â€“ using same post-card style -->
    {% if tags %}
    <div class="post-grid">
        {% for t in tags %}
        <div class="post-card">
            <div class="post-content">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <div>
                        <h3 class="mb-1" style="font-size: 1.45rem; color: #111827;">
                            {{ t.name }}
                        </h3>
                    </div>

                    {% if request.user.is_staff %}
                    <div class="d-flex gap-2">
                        <a href="{% url 'edit_tag' t.id %}"
                           class="btn btn-sm btn-outline-primary px-3 py-2">
                            <i class="bi bi-pencil me-1"></i>Edit
                        </a>
                        <a href="{% url 'delete_tag' t.id %}"
                           class="btn btn-sm btn-outline-danger px-3 py-2"
                           onclick="return confirm('Delete tag Â«{{ t.name }}Â»? This action cannot be undone.');">
                            <i class="bi bi-trash3 me-1"></i>Delete
                        </a>
                    </div>
                    {% endif %}
                </div>

                {% if request.user.is_staff %}
                <div class="small text-muted mt-2">
                    ID: {{ t.id }}
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state text-center py-5 my-5" style="min-height: 400px;">
        <div class="empty-icon mb-4" style="font-size: 6rem; opacity: 0.55;">ğŸ·ï¸</div>
        <h3 class="mb-3">No tags yet</h3>
        <p class="lead text-muted mb-4">Start by adding your first tag using the form above.</p>
    </div>
    {% endif %}

</div>


<style>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   Tag Management â€“ visually matches Category page
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.subtn {
    margin-top: 1rem;
}

/* Reuse category page hero style (light version) */
.category-hero {
  background: linear-gradient(135deg,
    rgba(249,250,251,0.97) 0%,
    rgba(243,244,246,0.94) 50%,
    rgba(59,130,246,0.07) 100%);
  padding: 4.5rem 0 3.5rem;
  margin: -1rem -1rem 4rem -1rem;
  border-radius: 0 0 32px 32px;
  position: relative;
  overflow: hidden;
}

.category-badge {
  background: rgba(59,130,246,0.9);
  color: white;
  padding: 0.45rem 1.1rem;
  border-radius: 50px;
  font-size: 0.82rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  backdrop-filter: blur(10px);
  box-shadow: 0 3px 15px rgba(59,130,246,0.22);
}

.page-title {
  font-family: 'Playfair Display', serif;
  font-size: 3.2rem;
  font-weight: 700;
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 0.8rem;
}

.page-subtitle {
  font-size: 1.18rem;
  color: #4b5563;
  max-width: 620px;
  margin: 0 auto;
}

/* Reuse post-card style from category.css */
.post-card {
  background: rgba(255,255,255,0.94);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.35);
  border-radius: 20px;
  box-shadow: 0 12px 44px rgba(0,0,0,0.08);
  transition: all 0.38s ease;
  margin-bottom: 20px;
}

.post-card:hover {
  transform: translateY(-12px);
  box-shadow: 0 28px 64px rgba(0,0,0,0.14);
}

/* Form styling consistent with public pages */
.form-control-lg {
  border-radius: 12px;
  font-size: 1.05rem;
  padding: 0.9rem 1.4rem;
  background: rgba(249,250,251,0.75);
  backdrop-filter: blur(8px);
}

/* Button hover lift effect */
.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 30px rgba(59,130,246,0.28);
}

/* Responsive adjustments */
@media (max-width: 992px) {
  .category-hero {
    padding: 3.5rem 0 2.5rem;
  }
  .page-title {
    font-size: 2.6rem;
  }
}

@media (max-width: 576px) {
  .d-flex.flex-column.flex-sm-row {
    flex-direction: column !important;
  }
  .btn-lg {
    width: 100%;
  }
}
</style>

{% endblock %}