{% extends "base.html" %}
{% load static %}

{% block title %}Edit Tag - NoteSpace{% endblock %}

{% block content %}

<div class="container py-5">

    <!-- Hero-style header (same feeling as category edit) -->
    <section class="category-hero mb-5">
        <div class="container">
            <div class="hero-content text-center">
                <span class="category-badge">Edit</span>
                <h1 class="page-title">Edit Tag</h1>
                <p class="page-subtitle">
                    Update <strong>{{ form.name.value|default:"this tag" }}</strong>
                </p>
            </div>
        </div>
    </section>

    <!-- Edit form – glassmorphism card, centered, same style as category edit -->
    <div class="post-card mx-auto" style="max-width: 680px;">
        <div class="post-content p-5">
            <h3 class="mb-4 fw-semibold" style="color: #111827;">
                Update Tag Details
            </h3>

            <form method="POST" class="d-flex flex-column gap-4">
                {% csrf_token %}

                <div>
                    <label for="id_name" class="form-label fw-medium mb-2" style="color: #374151;">
                        Tag Name
                    </label>
                    <input type="text"
                           name="name"
                           id="id_name"
                           value="{{ form.name.value|default:'' }}"
                           class="form-control form-control-lg border-0 shadow-sm"
                           placeholder="e.g. Python, TravelHacks, Productivity, AI2025..."
                           required
                           autofocus
                           style="background: rgba(249,250,251,0.75); backdrop-filter: blur(10px); border-radius: 12px;">
                </div>

                <div class="d-flex gap-3 flex-wrap mt-4">
                    <button type="submit"
                            class="btn btn-primary btn-lg px-5 shadow"
                            style="background: linear-gradient(135deg, #3b82f6, #2563eb); border: none;">
                        <i class="bi bi-save me-2"></i>
                        Save Changes
                    </button>

                    <a href="{% url 'manage_tags' %}"
                       class="btn btn-outline-secondary btn-lg px-5">
                        <i class="bi bi-arrow-left me-2"></i>
                        Back to List
                    </a>
                </div>

                {% if form.errors %}
                <div class="alert alert-danger mt-4" role="alert">
                    <strong>Please fix the following:</strong>
                    <ul class="mb-0 mt-2">
                        {% for field in form %}
                            {% for error in field.errors %}
                            <li>{{ field.label }}: {{ error }}</li>
                            {% endfor %}
                        {% endfor %}
                        {% for error in form.non_field_errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                {% if messages %}
                <div class="mt-4">
                    {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </form>
        </div>
    </div>

</div>


<style>
/* ────────────────────────────────────────────────
   Edit Tag – visually identical to Edit Category
───────────────────────────────────────────────── */

.category-hero {
  background: linear-gradient(135deg,
    rgba(249,250,251,0.97) 0%,
    rgba(243,244,246,0.94) 50%,
    rgba(59,130,246,0.06) 100%);
  padding: 4.5rem 0 3.5rem;
  border-radius: 0 0 32px 32px;
  margin: -1rem -1rem 4rem -1rem;
  position: relative;
}

.category-badge {
  background: rgba(59,130,246,0.88);
  color: white;
  padding: 0.45rem 1.1rem;
  border-radius: 50px;
  font-size: 0.85rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  backdrop-filter: blur(10px);
  box-shadow: 0 3px 15px rgba(59,130,246,0.22);
}

.page-title {
  font-family: 'Playfair Display', serif;
  font-size: 3.1rem;
  font-weight: 700;
  background: linear-gradient(90deg, #3b82f6, #60a5fa);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 0.6rem;
}

.page-subtitle {
  font-size: 1.18rem;
  color: #4b5563;
  max-width: 620px;
  margin: 0 auto;
}

.post-card {
  background: rgba(255,255,255,0.94);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.35);
  border-radius: 20px;
  box-shadow: 0 12px 44px rgba(0,0,0,0.08);
  transition: all 0.35s ease;
}

.post-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 24px 60px rgba(0,0,0,0.14);
}

.form-control-lg {
  border-radius: 12px;
  font-size: 1.05rem;
  padding: 0.9rem 1.4rem;
}

.btn-primary {
  transition: all 0.3s ease;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 30px rgba(59,130,246,0.28);
}

@media (max-width: 768px) {
  .page-title {
    font-size: 2.6rem;
  }
  .category-hero {
    padding: 3.5rem 0 2.5rem;
  }
}

@media (max-width: 576px) {
  .d-flex.gap-3 {
    flex-direction: column;
  }
  .btn-lg {
    width: 100%;
  }
}
</style>

{% endblock %}